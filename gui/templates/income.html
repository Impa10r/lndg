{% extends "base.html" %}
{% load static %}
{% block title %} {{ block.super }} - P&L{% endblock %}
{% block content %}
<script src="{% static 'charts.js' %}"></script>
{% load humanize %}
<div class="w3-container w3-padding-small">
  <h2>P&L Statement For <a href="{{ graph_links }}/{{ network }}node/{{ node_info.identity_pubkey }}" target="_blank">{% if node_info.alias != "" %}{{ node_info.alias }}</a> ({{ node_info.identity_pubkey }}){% else %}{{ node_info.identity_pubkey }}</a>{% endif %}</h2>
  <canvas id="myChart"></canvas>
  <script>
    const ctx = document.getElementById('myChart');
  
const data = {
  labels: ['a','b','c','d'],
  datasets: [
    {
      label: '1 Day',
      fill: false,
      backgroundColor: '#ff0000',
      borderColor: '#ff0000',
      data: [1,2,3,4],
    }, {
      label: '7 Day',
      fill: false,
      backgroundColor: '#00ff00',
      borderColor: '#00ff00',
      borderDash: [5, 5],
      data: [1,2,3,4],
    }, {
      label: '30 Day',
      backgroundColor: '#0000ff',
      borderColor: '#0000ff',
      data: [1,2,3,4],
      fill: true,
    }, {
      label: '90 Day',
      backgroundColor: '#0000ff',
      borderColor: '#0000ff',
      data: [1,2,3,4],
      fill: true,
    }
  ]
};

const config = {
  type: 'line',
  data: data,
  options: {
    responsive: true,
    plugins: {
      title: {
        display: true,
        text: 'Chart.js Line Chart'
      },
    },
    interaction: {
      mode: 'index',
      intersect: false
    },
    scales: {
      x: {
        display: true,
        title: {
          display: true,
          text: 'Month'
        }
      },
      y: {
        display: true,
        title: {
          display: true,
          text: 'Value'
        }
      }
    }
  },
};
new Chart(ctx, config)
  </script>
  <table class="w3-table-all w3-centered w3-hoverable">
    <tr>
      <th>Line Item</th>
      <th>1 Day</th>
      <th>7 Day</th>
      <th>30 Day</th>
      <th>90 Day</th>
      <th>Lifetime</th>
    </tr>
    <tr>
      <td>Payments Routed</td>
      <td>{{ forward_count_1day|intcomma }}</td>
      <td>{{ forward_count_7day|intcomma }}</td>
      <td>{{ forward_count_30day|intcomma }}</td>
      <td>{{ forward_count_90day|intcomma }}</td>
      <td>{{ forward_count|intcomma }}</td>
    </tr>
    <tr>
      <td>Value Routed</td>
      <td>{{ forward_amount_1day|intcomma }}</td>
      <td>{{ forward_amount_7day|intcomma }}</td>
      <td>{{ forward_amount_30day|intcomma }}</td>
      <td>{{ forward_amount_90day|intcomma }}</td>
      <td>{{ forward_amount|intcomma }}</td>
    </tr>
    <tr>
      <td>Revenue Earned</td>
      <td>{{ total_revenue_1day|intcomma }} [{{ total_revenue_ppm_1day|intcomma }}]</td>
      <td>{{ total_revenue_7day|intcomma }} [{{ total_revenue_ppm_7day|intcomma }}]</td>
      <td>{{ total_revenue_30day|intcomma }} [{{ total_revenue_ppm_30day|intcomma }}]</td>
      <td>{{ total_revenue_90day|intcomma }} [{{ total_revenue_ppm_90day|intcomma }}]</td>
      <td>{{ total_revenue|intcomma }} [{{ total_revenue_ppm|intcomma }}]</td>
    </tr>
    <tr>
      <td>Onchain Costs</td>
      <td>{{ onchain_costs_1day|intcomma }}</td>
      <td>{{ onchain_costs_7day|intcomma }}</td>
      <td>{{ onchain_costs_30day|intcomma }}</td>
      <td>{{ onchain_costs_90day|intcomma }}</td>
      <td>{{ onchain_costs|intcomma }}</td>
    </tr>
    <tr>
      <td>Offchain Costs</td>
      <td>{{ total_fees_1day|intcomma }} [{{ total_fees_ppm_1day }}]</td>
      <td>{{ total_fees_7day|intcomma }} [{{ total_fees_ppm_7day }}]</td>
      <td>{{ total_fees_30day|intcomma }} [{{ total_fees_ppm_30day }}]</td>
      <td>{{ total_fees_90day|intcomma }} [{{ total_fees_ppm_90day }}]</td>
      <td>{{ total_fees|intcomma }} [{{ total_fees_ppm }}]</td>
    </tr>
    <tr>
      <td>Percent Cost</td>
      <td>{{ percent_cost_1day|intcomma }}%</td>
      <td>{{ percent_cost_7day|intcomma }}%</td>
      <td>{{ percent_cost_30day|intcomma }}%</td>
      <td>{{ percent_cost_90day|intcomma }}%</td>
      <td>{{ percent_cost|intcomma }}%</td>
    </tr>
    <tr>
      <td>Profits</td>
      <td>{{ profits_1day|intcomma }} [{{ profits_ppm_1day }}]</td>
      <td>{{ profits_7day|intcomma }} [{{ profits_ppm_7day }}]</td>
      <td>{{ profits_30day|intcomma }} [{{ profits_ppm_30day }}]</td>
      <td>{{ profits_90day|intcomma }} [{{ profits_ppm_90day }}]</td>
      <td>{{ profits|intcomma }} [{{ profits_ppm }}]</td>
    </tr>
  </table>
</div>
{% endblock %}